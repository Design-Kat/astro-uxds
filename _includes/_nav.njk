{% macro navItem(data, level) %}

	{% if data.items.length %}
		<li 
		class="tree__tree-item"
		role="treeitem"
		aria-level="{{ level }}"
		data-section="{{ data.url.split('/')[level] }}"
		aria-expanded="{{ "true" if data.url.split('/')[level] ===  page.url.split('/')[level] else "false" }}"
		>

			<a href="#">{{ data.label }}</a>
			<ul>
				{% for navData in data.items %}
					{{ navItem(navData, level + 1) }}
				{% endfor %}
		</ul>
	</li>
{% else %}
	<li
		class="tree__tree-item"
		role="none"
		aria-level="{{ level }}"
		aria-selected="{{ "true" if data.url === page.url.substr(0,page.url.length-1) else "false" }}">
		<a role="treeitem" href="{{ data.url }}">{{ data.label }}</a>
	</li>
{% endif %}

{% endmacro %}

<link rel="stylesheet" href="/css/sidebar.css">
<link rel="stylesheet" href="/css/navigation.css">
<script src="/js/navigation.js"></script>

<div class="sidebar">
<div class="masthead">
	<img class="masthead-logo" src="/img/_site/astro-logo--small.svg"/>
	<form>
		<input type="search">
	</form>
</div>

<nav id="navigation" class="navigation">
	<ul class="parents" role="tree">
		{% for navData in navigation -%}
			{{ navItem(navData, 1) }}
		{% endfor %}
	</ul>
</nav>
</div>

{# <li class="nav-item parent" role="treeitem">

				{% if navItem.items.length %}
					<a href="#">{{navItem.label}}</a>
					<ul class="children" role="group">
						{% for subNavItem in navItem.items -%}
							<li role="treeitem" class="nav-item {{ "selected" if subNavItem.url === page.url.substr(0,page.url.length-1) }}">
								<a href="{{subNavItem.url}}">{{subNavItem.label}}</a>
							</li>
						{% endfor %}
					</ul>
				{% else %}
					<a href="{{navItem.url}}">{{navItem.label}}</a>
				{% endif %}
			</li> #}