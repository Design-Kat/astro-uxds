<!-- Recursive rendering of child tree items //-->
{% macro navItem(data, level) %}
	{% if data.items.length %}
		<li 
		class="tree__tree-item {{ data.class }}"
		role="treeitem"
		aria-level="{{ level }}"
		data-section="{{ data.url.split('/')[level] }}"
		aria-expanded="{{ "true" if data.url.split('/')[level] ===  page.url.split('/')[level] else "false" }}"
		>
			<a href="#">{{ data.label }}</a>
			<ul>
				{% for navData in data.items %}
					{{ navItem(navData, level + 1) }}
				{% endfor %}
		</ul>
	</li>
{% else %}
	<li
		class="tree__tree-item  {{ data.class }}"
		role="none"
		aria-level="{{ level }}"
		aria-selected="{{ "true" if data.url === page.url.substr(0,page.url.length-1) else "false" }}">
		<a role="treeitem" href="{{ data.url }}">{{ data.label }}</a>
	</li>
{% endif %}

{% endmacro %}

<link rel="stylesheet" href="/css/sidebar.css">
<link rel="stylesheet" href="/css/navigation.css">
<script src="/js/navigation.js"></script>

<div class="sidebar">
<div class="masthead">
	<img class="masthead-logo" src="/img/_site/astro-logo--small.svg"/>

	<div class="masthead__toolbar">
		<label class="search" for="search">
			<form id="rtd-search-form">
				<input type="search" name="q" class="search__input" placeholder="Search â€¦">
			</form>
		</label>
		<button class="print-button" onclick="javascript:window.print()">Print</button>
	</div>

</div>

<nav id="navigation" class="navigation">
	<ul class="parents" role="tree">
		{% for navData in navigation -%}
			{{ navItem(navData, 1) }}
		{% endfor %}
	</ul>
</nav>
</div>